{% extends "base/base.html" %}

{% load static %}
{% load xoanime %}

{% block title %}
{% if request.get_details.title %}
{{request.get_details.title|title}}
{% endif %}
{% endblock title %}

{% block content %}

<div id="details#{{request.get_id}}" class="space-y-4">
	{% comment %} Title {% endcomment %}
	<div class="flex items-center justify-center p-2 my-2">
		{% if request.get_details.title %}
		<p class="text-3xl font-bold text-center">
			{% if request.get_details.title %}
			{{request.get_details.title|title}}
			{% endif %}
		</p>
		{% endif %}
	</div>

	{% if request.get_details.cover %}
	<img src="{{request.get_details.cover}}" alt="{{request.get_id}}#cover" data-type="cover" class="hidden mx-auto">
	{% endif %}

	<div class="flex justify-around p-3">
		{% comment %} Image {% endcomment %}
		<span class="">
			{% if request.get_details.image %}
			<img src="{{request.get_details.image}}" alt="" data-type="image" class="h-[300px] w-[220px]">
			{% endif %}
		</span>
		{% comment %} Description {% endcomment %}
		<div class="flex items-center  w-1/2">
			{% if request.get_details.description %}
			<span class="scrollbar scrollbar-none overflow-auto h-[280px]">
				{{request.get_details.description|safe}}
			</span>
			{% endif %}
		</div>
	</div>

	{% if request.get_provider == "anilist" %}
	<div class="flex mx-auto w-11/12  space-x-4">
		<div class="w-1/3 mx-auto bg-green-200 flex flex-col">
			<div class="w-10/12 mx-auto text-center">
				<p class="text-xl font-bold p-2 py-4">Characters</p>
			</div>
		</div>

		<div class="w-1/3 mx-auto bg-green-200 flex flex-col">
			<div class="w-10/12 mx-auto text-center">
				<p class="text-xl font-bold p-2 py-4">Recommendations</p>
			</div>
		</div>

		<div class="w-1/3 mx-auto bg-green-200 flex flex-col">
			<div class="w-10/12 mx-auto text-center">
				<p class="text-xl font-bold p-2 py-4">Relations</p>
			</div>
		</div>
	</div>
	{% endif %}
</div>


{% comment %} Sidebar Button {% endcomment %}
<button
	class="fixed border right-20 opacity-10 hover:opacity-80 bottom-20 bg-slate-100 focus:ring-2 focus:ring-slate-300 font-medium rounded-full text-sm p-2"
	type="button" data-drawer-target="details-sidebar" data-drawer-show="details-sidebar"
	aria-controls="details-sidebar">
	<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
		class="w-6 h-6">
		<path stroke-linecap="round" stroke-linejoin="round"
			d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" />
	</svg>
</button>


{% comment %} Sidebar {% endcomment %}
<div id="details-sidebar"
	class="fixed flex flex-col top-0 left-0 z-40 w-[275px] mb:w-[315px] xxs:w-[370px] xs:w-[420px] h-screen p-2 overflow-y-auto transition-transform -translate-x-full bg-white"
	tabindex="-1" aria-labelledby="details-sidebar-label">
	<div class="items-center flex justify-between p-2 w-10/12 mx-auto">
		{% comment %} Title {% endcomment %}
		<h5 id="details-sidebar-label"
			class="flex-1 truncate text-base font-semibold text-gray-500 uppercase dark:text-gray-400">
			{% if request.get_details.title %}
			{{request.get_details.title|title}}
			{% endif %}
		</h5>

		{% comment %} Close Button {% endcomment %}
		<button type="button" data-drawer-hide="details-sidebar" aria-controls="details-sidebar"
			class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 items-center dark:hover:bg-gray-600 dark:hover:text-white">
			<svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"
				xmlns="http://www.w3.org/2000/svg">
				<path fill-rule="evenodd"
					d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
					clip-rule="evenodd"></path>
			</svg>
			<span class="sr-only">Close menu</span>
		</button>
	</div>

	{% comment %} Contents {% endcomment %}
	<div class="flex-1 flex flex-col justify-around">
		{% if request.get_provider == "anilist" %}
		<div class="flex items-center p-3 justify-around">

			{% comment %} Mal {% endcomment %}
			{% if request.get_details.malId %}
			<a href="https://myanimelist.net/anime/{{request.get_details.malId}}">
				<img src="{% static 'images/mal.jpg' %}" class="h-8">
			</a>
			{% endif %}

			{% comment %} Mappings {% endcomment %}
			{% if request.get_details.mappings %}

			{% for mapping in request.get_details.mappings %}

			{% comment %} Anilist {% endcomment %}
			{% if "anilist" == mapping.providerId %}
			<a href="https://anilist.co/anime/{{mapping.id}}">
				<img src="{% static 'images/anilist.png' %}" class="h-8">
			</a>
			{% endif %}

			{% comment %} Kitsu {% endcomment %}
			{% if "kitsu" == mapping.providerId %}
			<a href="https://kitsu.io/anime/{{mapping.id}}">
				<img src="{% static 'images/kitsu.png' %}" class="h-8">
			</a>
			{% endif %}


			{% comment %} Tmdb {% endcomment %}
			{% if "tmdb" == mapping.providerId %}
			<a href="https://www.themoviedb.org/{{mapping.id}}">
				<img src="{% static 'images/tmdb.png' %}" class="h-8">
			</a>
			{% endif %}

			{% endfor %}
			{% endif %}

		</div>
		{% endif %}
		<div class="">
			<p class="text-xl text-center py-3 font-semibold">Details</p>
			<hr class="p-2 w-3/5 mx-auto">
			{% include "core/components/details/sidebar.html" %}
		</div>
	</div>
</div>

{% comment %}recommendations characters relations{% endcomment %}



{% if request.get_now_playing %}
<a href="{% url 'watch' %}?id={{request.get_now_playing}}">Watch</a>
{% endif %}

{% endblock content %}